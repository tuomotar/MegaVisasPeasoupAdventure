var tabOn=!0;function onBlur(){tabOn=!1}function onFocus(){tabOn=!0}window.onfocus=onFocus;window.onblur=onBlur;
(function(R,n){function h(a){var b={};b.code=a;b.isDown=!1;b.isUp=!0;b.press=void 0;b.release=void 0;b.downHandler=function(a){a.keyCode===b.code&&b.press&&b.press();a.preventDefault()};b.upHandler=function(a){a.keyCode===b.code&&b.release&&b.release();a.preventDefault()};window.addEventListener("keydown",b.downHandler.bind(b),!1);window.addEventListener("keyup",b.upHandler.bind(b),!1);return b}function d(a,b){this.x=a||0;this.y=b||0}function P(a,b){var k=Math.abs(a.x-b.x-b.w/2),d=Math.abs(a.y-b.y-
b.h/2);if(k>b.w/2+a.r||d>b.h/2+a.r)return!1;if(k<=b.w/2||d<=b.h/2)return!0;k-=b.w/2;d-=b.h/2;return k*k+d*d<=a.r*a.r}function G(a,b,k,d,c,v,w){b=Math.round(b);k=Math.round(k);c=Math.round(c);v=Math.round(v);var z=a.width,e=a.height,l=d.width,r=d.height;w&&(b-=z/2+.5<<0,k-=e/2+.5<<0,c-=l/2+.5<<0,v-=r/2+.5<<0);w=Math.max(b,c);var m=Math.max(k,v),p=Math.min(b+z,c+l),e=Math.min(k+e,v+r);if(w>=p||m>=e)return!1;var r=p-w,h=e-m;a=a.data;d=d.data;if(4>r&&4>h)for(h=w;h<p;h++)for(var n=m;n<e;n++){if(0!==a[4*
(h-b+(n-k)*z)+3]&&0!==d[4*(h-c+(n-v)*l)+3])return!0}else for(var r=r/3,q=h/3,r=~~r===r?r:r+1|0,q=~~q===q?q:q+1|0,t=0;t<q;t++)for(var u=0;u<r;u++)for(n=m+t;n<e;n+=q)for(h=w+u;h<p;h+=r)if(0!==a[4*(h-b+(n-k)*z)+3]&&0!==d[4*(h-c+(n-v)*l)+3])return!0;return!1}n(".loaderContainer").css("left",window.innerWidth/2+"px");var l="init html",a={},e={},u=0,m=document.createElement("canvas"),x={},A={},p,c=[],q=[],b;n("#rendererContainer").css("display","none !imporant;");p=m.getContext("2d");m.id="helperCanvas";
m.style.position="absolute";document.body.appendChild(m);m.style.visibility="hidden";n(window).load(function(){l="HTML loaded. Loading settings-json.";n.getJSON("http://localhost:8888/rocket/settings.json",function(a){b=a;l=b.GAME_STATES.SETTINGS_JSON_LOADED;m.width=b.designDim.w;m.height=b.designDim.h;A=new PIXI.Stage(16711680);x=new PIXI.autoDetectRenderer(b.designDim.w,b.designDim.h,{transparent:!0});document.getElementById("rendererContainer").appendChild(x.view);ttScalingManager.initRendererDimensions(x,
b.designDim.w,b.designDim.h,"rendererContainer",b.nonGameArea.w,b.nonGameArea.h);l=b.GAME_STATES.LOADING_SPRITES;ttAssetManager.loadSprites();document.addEventListener("allSpritesCreated",function(a){q=ttAudioManager.loadAudios(b.audios);ttAudioManager.createAudioSequencer(b.seq);ttAssetManager.setSpritesOnStage();ttScalingManager.scaleRenderer();ttMain.initMainLoopAndRun()},!1)})});n(window).resize(function(){ttScalingManager.scaleRenderer();n("body").css("background","-moz-linear-gradient(top,  #FCFBE3,  #000000)");
n("body").css("background","-webkit-gradient(linear, left top, left bottom, from(#FCFBE3), to(#000000))");n("body").css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='#FCFBE3', endColorstr='#000000'");n("body").css("background","-o-linear-gradient(rgb(252,251,227),rgb(255,255,255))")});(function(f,g){function k(a,f){for(var b in f.properties)a[b]=f.properties[b],"stageEnter"==b&&(a.anchor.x=f.properties.stageEnter.anchor.x,a.anchor.y=f.properties.stageEnter.anchor.y)}function Q(){var a=
new PIXI.loaders.Loader;a.baseUrl=b.urls.assets;for(var f in b.assets_bitmap_spritesheet)a.add(b.urls.assets+b.assets_bitmap_spritesheet[f].filename_image,b.urls.assets+b.assets_bitmap_spritesheet[f].filename_json);a.add(b.urls.assets+b.assets_pixi_animated_spritesheet.roller.filename_image,b.urls.assets+b.assets_pixi_animated_spritesheet.roller.filename_json);return a}f.loadSprites=function(){Q().on("progress",function(a){g("#loaderData").html(Math.round(a.progress))}).load(function(f,d){g("#loaderData").html(Math.round(f.progress));
g(".loaderContainer").css("display","none");for(var c in b.assets_bitmap_spritesheet)for(var e in b.assets_bitmap_spritesheet[c].sprites)a[b.assets_bitmap_spritesheet[c].sprites[e].spriteName]=PIXI.Sprite.fromFrame(b.assets_bitmap_spritesheet[c].sprites[e].fileName),a[b.assets_bitmap_spritesheet[c].sprites[e].spriteName].name=b.assets_bitmap_spritesheet[c].sprites[e].spriteName,k(a[b.assets_bitmap_spritesheet[c].sprites[e].spriteName],b.assets_bitmap_spritesheet[c].sprites[e]);g.getJSON(b.urls.assets+
b.assets_bitmap_spritesheet.mainSpriteSheet.filename_json,function(f){for(var d in f.frames)for(var c in b.assets_bitmap_spritesheet)for(var g in b.assets_bitmap_spritesheet[c].sprites)d==b.assets_bitmap_spritesheet[c].sprites[g].fileName&&(b.assets_bitmap_spritesheet[c].sprites[g].frameData=f.frames[d].frame);a[b.assets_pixi_animated_spritesheet.roller.spriteName]=PIXI.extras.MovieClip.fromFrames("g1.png g2.png g3.png g4.png g5.png g6.png g7.png g8.png g9.png g10.png g11.png g12.png g13.png g14.png g15.png g16.png g17.png g18.png g19.png g20.png g21.png g22.png g23.png g24.png g25.png g26.png g27.png g28.png g29.png g30.png g31.png g32.png g33.png g34.png g35.png g36.png".split(" "));
a[b.assets_pixi_animated_spritesheet.roller.spriteName].name=b.assets_pixi_animated_spritesheet.roller.spriteName;k(a[b.assets_pixi_animated_spritesheet.roller.spriteName],b.assets_pixi_animated_spritesheet.roller);document.dispatchEvent(new CustomEvent("allSpritesCreated",{detail:{temp:"temp"},bubbles:!0,cancelable:!0}))})})};f.setSpritesOnStage=function(){for(var f in a)A.addChild(a[f]);ttTextManager.createTextObjectsFromJson();for(f in c)A.addChild(c[f]);ttHighScoreManager.loadTop10();a.spaceship.texture01=
PIXI.Texture.fromFrame("visa1.png");a.spaceship.texture02=PIXI.Texture.fromFrame("visa3.png");a.spaceship.texture03=PIXI.Texture.fromFrame("visa2.png");a.spaceship.checkVisualAsset=function(){a.spaceship.texture=-1E-5>a.spaceship.velocity.x?a.spaceship.texture02:1E-5<a.spaceship.velocity.x?a.spaceship.texture03:a.spaceship.texture01};a.sound_on.interactive=!0;a.sound_off.interactive=!0;H.press=function(f){a.sound_on.visible=!1;a.sound_off.visible=!0;Howler.unmute()};I.press=function(f){a.sound_on.visible=
!0;a.sound_off.visible=!1;Howler.mute()};a.spaceship.setStartPoint=a.level250.setStartPoint=a.roller.setStartPoint=a.arrowUp.setStartPoint=a.arrowDown.setStartPoint=a.arrowLeft.setStartPoint=a.arrowRight.setStartPoint=a.sound_off.setStartPoint=a.sound_on.setStartPoint=function(){1==this.stageEnter.position.random?(this.position.x=Math.floor(Math.random()*(this.stageEnter.position.xPixMax-this.stageEnter.position.xPixMin))+this.stageEnter.position.xPixMin,this.position.y=Math.floor(Math.random()*(this.stageEnter.position.yPixMax-
this.stageEnter.position.yPixMin))+this.stageEnter.position.yPixMin):(this.position.x=this.stageEnter.position.xPixMin,this.position.y=this.stageEnter.position.yPixMin)};a.roller.setStartVel=a.spaceship.setStartVel=function(){var f,b=f=1;1==this.stageEnter.velocity.random?f=new d(Math.floor(Math.random()*(this.stageEnter.velocity.xPixMax-this.stageEnter.velocity.xPixMin))+this.stageEnter.velocity.xPixMin,Math.floor(Math.random()*(this.stageEnter.velocity.yPixMax-this.stageEnter.velocity.yPixMin))+
this.stageEnter.velocity.yPixMin):(this===a.roller&&(b=Math.floor(2*Math.random())+1,f=.2*u+1,b=2>b?-1:1),f=new d(this.stageEnter.velocity.xPixMin*f*b,this.stageEnter.velocity.yPixMin));this.velocity=f};a.spaceship.levelUp=function(){u++;a.roller.die();a.spaceship.setStartVel();a.spaceship.setStartPoint();c.score.text=u;q.score.audio.play()};a.roller.die=function(){a.roller.platformHitPlayed=!1;a.roller.onSurface=!1;a.roller.affectedByGravity=!1;a.roller.position.x=b.designDim.w/2;a.roller.position.y=
100;a.roller.acceleration=new d(0,0);a.roller.velocity=new d(0,0);setTimeout(function(){a.roller.affectedByGravity=!0},Math.floor(50*Math.random())+1/(u+1)*1E4)};a.bg1.mousedown=a.bg1.touchstart=function(a){l=b.GAME_STATES.START_GAME};1==a.spaceship.userControl.userControlOn&&(y.press=J.press=function(f){t.up=!0;a.arrowUp.alpha=.5;a.spaceship.temporaryAccelerationImpulseY=-1*a.spaceship.userControl.keys.keyUpDown.accBurst;q.engine.audio.fadeIn(.7,50)},y.release=J.release=function(f){t.up=!1;a.arrowUp.alpha=
1;q.engine.audio.fadeOut(0,50)},B.press=K.press=function(f){t.down=!0;this.onSurface||(a.spaceship.resetVelocityX(),a.spaceship.velocity=new d(a.spaceship.velocity.x,.6*a.spaceship.velocity.y),this.resetAccelerationX&&this.resetAccelerationX);a.arrowDown.alpha=.5},B.release=K.release=function(f){t.down=!1;a.arrowDown.alpha=1},C.press=L.press=function(f){a.spaceship.onSurface?a.spaceship.velocity.x+=.02:(1==t.up&&y.press(),t.right=!0,a.spaceship.onSurface||(a.spaceship.rotation+=Math.PI/180*5));a.arrowRight.alpha=
.5},C.release=L.release=function(f){a.arrowRight.alpha=1},D.press=M.press=function(f){a.spaceship.onSurface?a.spaceship.velocity.x-=.02:(1==t.up&&y.press(),t.left=!0,a.spaceship.onSurface||(a.spaceship.rotation-=Math.PI/180*5));a.arrowLeft.alpha=.5},D.release=M.release=function(f){a.arrowLeft.alpha=1});a.spaceship.checkGameAreaBorders=a.roller.checkGameAreaBorders=function(){this.position.x+this.getBounds().width/2>=b.designDim.w&&(this===a.roller?this.getBounds().y<b.nonGameArea.y-this.getBounds().width-
10&&(this.velocity.x*=-1,this.position.x=b.designDim.w-this.getBounds().width/2):(this.velocity.x*=-1,this.position.x=b.designDim.w-this.getBounds().width/2));0>=this.position.x-this.getBounds().width/2&&(this===a.roller?this.getBounds().y<b.nonGameArea.y-this.getBounds().width-10&&(this.velocity.x*=-1,this.position.x=this.getBounds().width/2):(this.velocity.x*=-1,this.position.x=this.getBounds().width/2));0>=this.position.y-this.getBounds().height/2&&(this.velocity.y*=-1,this.position.y=this.getBounds().height/
2);this===a.roller&&(0>this.x||this.x>b.designDim.w)&&this.die()};a.roller.visible=!1;a.roller.loop=!0;a.roller.animationSpeed=.5;a.roller.setDirectionAndAnimationSpeed=function(){0==this.velocity.x&&0!=this.animationSpeed&&(this.animationSpeed=0);0>this.velocity.x&&(this.animationSpeed=-1.8*Math.abs(this.velocity.x));0<this.velocity.x&&(this.animationSpeed=1.8*Math.abs(this.velocity.x))};var k,g=1;a.level250.kinematicMove=function(){var f=u;"horizontal"==a.level250.stageEnter.kinematicMotion.direction&&
(1!=a.level250.stageEnter.kinematicMotion.randomVelocity&&(k=.02*a.level250.stageEnter.kinematicMotion.velXMin*f,this.position.x+k>=a.level250.stageEnter.kinematicMotion.locXMax&&(g=-1),this.position.x-k<=a.level250.stageEnter.kinematicMotion.locXMin&&(g=1),this.position.x+=e.timeDiffNowMs*k*g),this.velocity=new d(k,0));a.hernekeitto.position.x=a.level250.position.x;a.hernekeitto.position.y=a.level250.position.y-a.hernekeitto.height/2-a.level250.height/2-2};a.arrowUp.interactive=!0;a.arrowDown.interactive=
!0;a.arrowLeft.interactive=!0;a.arrowRight.interactive=!0;a.arrowUp.mousedown=a.arrowUp.touchstart=y.press;a.arrowUp.mouseup=a.arrowUp.touchend=y.release;a.arrowDown.mousedown=a.arrowDown.touchstart=B.press;a.arrowDown.mouseup=a.arrowDown.touchend=B.release;a.arrowLeft.mousedown=a.arrowLeft.touchstart=D.press;a.arrowLeft.mouseup=a.arrowLeft.touchend=D.release;a.arrowRight.mousedown=a.arrowRight.touchstart=C.press;a.arrowRight.mouseup=a.arrowRight.touchend=C.release;a.sound_on.mousedown=a.sound_on.touchstart=
H.press;a.sound_off.mousedown=a.sound_off.touchstart=I.press}})(window.ttAssetManager=window.ttAssetManager||{},jQuery);(function(f,g){document.addEventListener("nextRoller",function(f){a.roller.affectedByGravity=!0;a.roller.setStartVel()},!1);f.initMainLoopAndRun=function(){l=b.GAME_STATES.START_START_SCREEN;f.runMainLoop()};f.loopCalculateTime=function(){tabOn&&(e.timeNowMs=(new Date).getTime(),e.timeDiffNowMs=e.timeNowMs-e.timePast1Ms,e.timeDiffNowMs=e.timeNowMs-e.timePast1Ms,138441E7<e.timeDiffNowMs&&
(e.timeDiffNowMs=1),e.timeDiffNowMs>b.physics.deltaTMax&&(e.timeDiffNowMs=b.physics.deltaTMax),e.timeDiffNowMs<b.physics.deltaTMin&&(e.timeDiffNowMs=b.physics.deltaTMin));e.timePast1Ms=e.timeNowMs;e.finalCountdownCounterMs+=e.timeDiffNowMs;e.timeNowAsSeconds=Math.round(e.finalCountdownCounterMs/1E3);e.currentFrameRate=Math.round(1E3/e.timeDiffNowMs);e.framerateUpdateCounterMs+=e.timeDiffNowMs};f.doPhysicsPart1=function(){tabOn&&(a.spaceship.calculatePhysics(),a.roller.calculatePhysics(),a.spaceship.checkIfCollision(a.roller),
a.spaceship.checkIfCollision(a.level250),a.roller.checkIfCollision(a.level250))};f.doPhysicsPart2=function(){tabOn&&(a.spaceship.checkBottomHit(),a.roller.onSurface||a.roller.checkBottomHit(),a.spaceship.checkGameAreaBorders(),a.roller.checkGameAreaBorders(),a.level250.kinematicMove(),a.roller.setDirectionAndAnimationSpeed())};f.runStartStartScreen=function(){c.score.visible=!1;c.top10_1.visible=!0;c.top10_2.visible=!0;c.top10_3.visible=!0;c.top10_4.visible=!0;c.top10_5.visible=!0;c.top10_6.visible=
!0;c.top10_7.visible=!0;c.top10_8.visible=!0;c.top10_9.visible=!0;c.top10_10.visible=!0;a.level250.visible=!1;a.bg1.visible=!0;a.bg2.visible=!1;a.arrowUp.visible=!1;a.arrowRight.visible=!1;a.arrowDown.visible=!1;a.arrowLeft.visible=!1;a.spaceship.visible=!1;a.roller.visible=!1;a.hernekeitto.visible=!1;c.score.visible=!1;c.score.position.x=b.designDim.w/10-c.score.width/2;c.score.position.y=b.designDim.h/22-c.score.width/2;c.score.text=0;a.spaceship.setStartVel();a.spaceship.setStartPoint();a.sound_off.setStartPoint();
a.sound_on.setStartPoint();ttAudioManager.seq.parts.part1.playing=!0;ttAudioManager.seq.parts.part2.playing=!1;l=b.GAME_STATES.START_SCREEN};f.runStartScreen=function(){};f.runStartGame=function(){a.roller.die();c.score.visible=!0;c.top10_1.visible=!1;c.top10_2.visible=!1;c.top10_3.visible=!1;c.top10_4.visible=!1;c.top10_5.visible=!1;c.top10_6.visible=!1;c.top10_7.visible=!1;c.top10_8.visible=!1;c.top10_9.visible=!1;c.top10_10.visible=!1;a.level250.visible=!0;a.bg1.visible=!1;a.bg2.visible=!0;a.arrowUp.visible=
!0;a.arrowRight.visible=!0;a.arrowDown.visible=!0;a.arrowLeft.visible=!0;a.spaceship.visible=!0;a.roller.visible=!0;a.hernekeitto.visible=!0;a.roller.play();a.spaceship.velocity=new d(0,0);a.level250.setStartPoint();a.spaceship.setStartPoint();console.log(a.spaceship.position);a.arrowUp.setStartPoint();a.arrowDown.setStartPoint();a.arrowLeft.setStartPoint();a.arrowRight.setStartPoint();ttAudioManager.seq.parts.part1.playing=!0;ttAudioManager.seq.parts.part2.playing=!0;u=0;q.gameStart.audio.play();
l=b.GAME_STATES.GAME_ON};f.runGameFrame=function(){tabOn&&0<e.timeDiffNowMs&&(f.doPhysicsPart1(),f.doPhysicsPart2(),a.spaceship.checkVisualAsset())};f.runMainLoop=function(){if(tabOn){var a=function(){f.loopCalculateTime();l==b.GAME_STATES.START_START_SCREEN&&f.runStartStartScreen();l==b.GAME_STATES.START_SCREEN&&f.runStartScreen();l==b.GAME_STATES.START_GAME&&f.runStartGame();l==b.GAME_STATES.GAME_ON&&f.runGameFrame();x.render(A);ttAudioManager.runSequencer();window.requestAnimationFrame(a)};a()}}})(window.ttMain=
window.ttMain||{},jQuery);(function(a,b){a.mainRenderer;a.windowDim={w:0,h:0};a.gameArea={w:0,h:0,l:0,r:0,t:0,b:0};a.designDim={w:0,h:0};a.renderObjectId="not_defined";a.scalingFactor=1;a.nonGameArea={w:0,h:0};a.initRendererDimensions=function(b,d,c,g,e,h){a.mainRenderer=b;a.designDim.w=d;a.designDim.h=c;a.renderObjectId=g;a.nonGameArea.w=e;a.nonGameArea.h=h;a.calculateRendererDimensions();a.scalingFactor=a.gameArea.w/a.designDim.w;return{w:a.gameArea.w,h:a.gameArea.h,l:a.gameArea.l,r:a.gameArea.r,
t:a.gameArea.t,b:a.gameArea.b,scalingFactor:a.scalingFactor}};a.calculateRendererDimensions=function(){a.windowDim.w=window.innerWidth;a.windowDim.h=window.innerHeight;a.gameArea.h=1<=a.windowDim.h/a.designDim.h?a.designDim.h:a.windowDim.h;a.gameArea.w=a.designDim.w/a.designDim.h*a.gameArea.h;document.getElementById(a.renderObjectId).setAttribute("style","width:"+a.gameArea.w+"px; height:"+a.gameArea.h+"px; position:absolute;");a.gameArea.l=a.windowDim.w/2-a.gameArea.w/2;a.gameArea.r=a.gameArea.l+
a.gameArea.w;a.gameArea.t=0;a.gameArea.b=a.gameArea.t+a.gameArea.h;document.getElementById(a.renderObjectId).style.left=a.gameArea.l};a.scaleRenderer=function(){a.calculateRendererDimensions();x.view.style.width=a.gameArea.w+"px";x.view.style.height=a.gameArea.h+"px"}})(window.ttScalingManager=window.ttScalingManager||{},jQuery);(function(a,b){a.seq={parts:[]};a.createAudioSequencer=function(b){for(var d in b)a.seq.parts[d]=b[d],a.seq.parts[d].soundsPlaying=[]};a.runSequencer=function(){for(var b in a.seq.parts)if(a.seq.parts[b].playing)if(a.seq.parts[b].counter<
a.seq.parts[b].triggerNewSoundsIntervalMS)a.seq.parts[b].counter+=e.timeDiffNowMs;else{if(a.seq.parts[b].soundsPlaying.length<a.seq.parts[b].soundsPlayingLimit){var d=Math.floor(Math.random()*a.seq.parts[b].data.length);console.log(a.seq.parts[b].data[d].handle);q[a.seq.parts[b].data[d].handle].audio.play(function(d){a.seq.parts[b].soundsPlaying.push(d);console.log(a.seq.parts[b].soundsPlaying)}).partId=b}a.seq.parts[b].counter=0}};a.loadAudios=function(b){a.assocAudiosPlaying=[];var d=0,c=0,g=[],
e;for(e in b)g[b[e].handle]={},g[b[e].handle].handle=b[e].handle,c++,g[b[e].handle].audio=new Howl({urls:[b[e].path],loop:b[e].data.loop,volume:b[e].data.volume,format:b[e].data.format}),g[b[e].handle].audio.handle=b[e].handle,g[b[e].handle].isPlaying=!1,g[b[e].handle].audio.on("play",function(){a.assocAudiosPlaying[this.handle]=!0}),g[b[e].handle].audio.on("end",function(b){a.assocAudiosPlaying[this.handle]=!1;"undefined"!=typeof a.seq.parts[this.partId]&&(b=a.seq.parts[this.partId].soundsPlaying.indexOf(b),
-1<b&&a.seq.parts[this.partId].soundsPlaying.splice(b,1))}),d++;return g}})(window.ttAudioManager=window.ttAudioManager||{},jQuery);(function(a,d){a.createText=function(a){return new PIXI.Text(a.stageEnter.text,{font:a.font.sizePx+"px "+a.font.name,dropShadow:a.font.dropShadow,dropShadowDistance:a.font.dropShadowDistance,dropShadowColor:parseInt(a.font.dropShadowColor),stroke:parseInt(a.font.strokeColor),strokeThickness:a.font.strokeThickness,fill:parseInt(a.font.fillColor),align:a.font.align})};
a.createTextObjectsFromJson=function(){for(var d in b.texts)c[b.texts[d].name]=a.createText(b.texts[d]),c[b.texts[d].name].x=b.texts[d].stageEnter.xPixMin,c[b.texts[d].name].y=b.texts[d].stageEnter.yPixMin}})(window.ttTextManager=window.ttTextManager||{},jQuery);(function(a,d){a.highScoreTexts=[];a.loadTop10=function(){var c=d.getJSON(b.urls.top10ajax+"?get_top_10=true",function(a){});c.fail(function(a){console.log("Ajax fail.")});c.done(function(b){for(var d in b)a.highScoreTexts[d]={points:b[d][1],
nick:b[d][0]};a.setHighScores()})};a.setHighScores=function(){c.top10_1.text=a.highScoreTexts[0].nick+" "+a.highScoreTexts[0].points;c.top10_2.text=a.highScoreTexts[1].nick+" "+a.highScoreTexts[1].points;c.top10_3.text=a.highScoreTexts[2].nick+" "+a.highScoreTexts[2].points;c.top10_4.text=a.highScoreTexts[3].nick+" "+a.highScoreTexts[3].points;c.top10_5.text=a.highScoreTexts[4].nick+" "+a.highScoreTexts[4].points;c.top10_6.text=a.highScoreTexts[5].nick+" "+a.highScoreTexts[5].points;c.top10_7.text=
a.highScoreTexts[6].nick+" "+a.highScoreTexts[6].points;c.top10_8.text=a.highScoreTexts[7].nick+" "+a.highScoreTexts[7].points;c.top10_9.text=a.highScoreTexts[8].nick+" "+a.highScoreTexts[8].points;c.top10_10.text=a.highScoreTexts[9].nick+" "+a.highScoreTexts[9].points;c.top10_1.x=b.designDim.w/2-c.top10_1.width/2;c.top10_2.x=b.designDim.w/2-c.top10_2.width/2;c.top10_3.x=b.designDim.w/2-c.top10_3.width/2;c.top10_4.x=b.designDim.w/2-c.top10_4.width/2;c.top10_5.x=b.designDim.w/2-c.top10_5.width/2;c.top10_6.x=
b.designDim.w/2-c.top10_6.width/2;c.top10_7.x=b.designDim.w/2-c.top10_7.width/2;c.top10_8.x=b.designDim.w/2-c.top10_8.width/2;c.top10_9.x=b.designDim.w/2-c.top10_9.width/2;c.top10_10.x=b.designDim.w/2-c.top10_10.width/2};a.saveTop10=function(d){if(d>a.highScoreTexts[9].points){for(var c=5,g="ABC";3<c&&null!=g;)g=prompt("P\u00e4\u00e4sit Top 10 -listalle. Anna nimimerkki jonka pituus on 1 - 3 merkki\u00e4.",g),null==g&&(g="ABC"),c=g.length,1>c&&(c=5);null!=g&&(d=jQuery.ajax({method:"POST",url:b.urls.top10ajax,
data:{save_top_10:d,nick:g}}),d.fail(function(a){console.log("Ajax fail.")}),d.done(function(b){b=eval(b);for(var d in b)a.highScoreTexts[d]={points:b[d][1],nick:b[d][0]};a.setHighScores()}))}}})(window.ttHighScoreManager=window.ttHighScoreManager||{},jQuery);var D=h(37),y=h(38),C=h(39),B=h(40),J=h(87),M=h(65),K=h(83),L=h(68),N=h(85),H=h(51),I=h(52),O=h(32),t=[];N.press=O.press=function(a){l=b.GAME_STATES.START_GAME};N.release=O.release=function(a){};d.prototype.add=function(a){this.x+=a.x;this.y+=
a.y};d.prototype.substract=function(a){this.x-=a.x;this.y-=a.y};d.prototype.multiply=function(a){this.x*=a;this.y*=a};d.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};d.prototype.getAngle=function(){return Math.atan2(this.y,this.x)};d.fromAngle=function(a,b){return new d(b*Math.cos(a),b*Math.sin(a))};PIXI.Sprite.prototype.name="";PIXI.Sprite.prototype.acceleration=new d(0,0);PIXI.Sprite.prototype.pastAcceleration=new d(0,0);PIXI.Sprite.prototype.velocity=new d(0,
0);PIXI.Sprite.prototype.pastVelocity=new d(0,0);PIXI.Sprite.prototype.pastPosition=new d(0,0);PIXI.Sprite.prototype.temporaryAccelerationImpulseX=0;PIXI.Sprite.prototype.temporaryAccelerationImpulseY=0;PIXI.Sprite.prototype.temporaryVelocityImpulseX=0;PIXI.Sprite.prototype.temporaryVelocityImpulseY=0;PIXI.Sprite.prototype.onSurface=!1;PIXI.Sprite.prototype.affectedByGravity=!1;PIXI.Sprite.prototype.bounce=0;PIXI.Sprite.prototype.staticInCollision=!1;PIXI.Sprite.prototype.getMinVector=function(){return new d(this.position.x-
this.width/2,this.position.y-this.height/2)};PIXI.Sprite.prototype.getMaxVector=function(){return new d(this.position.x+this.width/2,this.position.y+this.height/2)};PIXI.Sprite.prototype.getSizeVector=function(){return new d(this.width,this.height)};var E,F;PIXI.Sprite.prototype.checkIfCollision=function(f){var c=!1,e;if(this===a.roller&&f===a.level250||f===a.roller&&this===a.level250)e={x:a.roller.position.x,y:a.roller.position.y,r:a.roller.width/4},c={x:a.level250.position.x-a.level250.width/2,
y:a.level250.position.y-a.level250.width/2,w:a.level250.width,h:a.level250.height},!a.roller.onSurface&&P(e,c)&&(a.roller.position.y<=a.level250.position.y-a.level250.height/2&&0<a.roller.velocity.y?a.roller.checkPlatformHit(a.level250):a.roller.onSurface||(a.roller.position.x<a.level250.position.x&&0<a.roller.velocity.x&&!top_bottom&&(a.roller.position.x=a.level250.position.x-a.level250.width/2-a.roller.width/2),a.roller.position.x>a.level250.position.x&&0>a.roller.velocity.x&&!top_bottom&&(a.roller.position.x=
a.level250.position.x+a.level250.width/2+a.roller.width/2))),a.roller.onSurface&&a.roller.position.y<a.level250.position.y&&(a.roller.position.x<a.level250.position.x-a.level250.width/2||a.roller.position.x>a.level250.position.x+a.level250.width/2)&&(a.roller.onSurface=!1);if(this===a.spaceship&&f===a.level250||f===a.spaceship&&this===a.level250)a.spaceship.onSurface&&(0<Math.abs(a.spaceship.velocity.y)&&(a.spaceship.onSurface=!1),a.spaceship.position.y<b.designDim.h/2&&(.01>Math.abs(a.spaceship.velocity.x)&&
(l=b.GAME_STATES.GAME_PAUSED,setTimeout(function(){l=b.GAME_STATES.GAME_ON;a.spaceship.levelUp()},700)),a.spaceship.position.x-a.spaceship.getBounds().width/2<a.level250.position.x-a.level250.width/2&&(a.spaceship.onSurface=!1),a.spaceship.position.x+a.spaceship.getBounds().width/2>a.level250.position.x+a.level250.width/2&&(a.spaceship.onSurface=!1))),c=this.minkowskiDifference(f),e=new d(c.position.x-c.width/2,c.position.y-c.height/2),c=new d(c.position.x+c.width/2,c.position.y+c.height/2),0>=e.x&&
0<=c.x&&0>=e.y&&0<=c.y&&(p.clearRect(0,0,m.width,m.height),p.drawImage(this.texture.baseTexture.source,0,0),E=p.getImageData(0,0,this.getBounds().width,this.getBounds().height),p.clearRect(0,0,m.width,m.height),p.drawImage(f.texture.baseTexture.source,0,0),F=p.getImageData(0,0,f.getBounds().width,f.getBounds().height),G(E,this.x,this.y,F,f.x,f.y,!0)&&(this===a.spaceship&&f===a.level250||this===a.level250&&f===a.spaceship)&&a.spaceship.checkPlatformHit(a.level250));this===a.spaceship&&f===a.roller&&
(c=this.minkowskiDifference(f),e=new d(c.position.x-c.width/2,c.position.y-c.height/2),c=new d(c.position.x+c.width/2,c.position.y+c.height/2),0>=e.x&&0<=c.x&&0>=e.y&&0<=c.y&&(p.clearRect(0,0,m.width,m.height),p.drawImage(this.texture.baseTexture.source,0,0),E=p.getImageData(0,0,this.getBounds().width,this.getBounds().height),p.clearRect(0,0,m.width,m.height),p.drawImage(f.texture.baseTexture.source,0,0),F=p.getImageData(0,0,f.getBounds().width,f.getBounds().height),G(E,this.x,this.y,F,f.x,f.y,!0)&&
this===a.spaceship&&f===a.roller&&(ttHighScoreManager.saveTop10(u),l=b.GAME_STATES.START_START_SCREEN,q.gameOver.audio.play())))};PIXI.Sprite.prototype.calculateAcceleration=function(){var a=0,c=0;1==this.affectedByGravity&&(this.onSurface||(c=this.gravityFactor?c+b.physics.gravityOrig*this.gravityFactor:c+b.physics.gravityOrig));0!=this.temporaryAccelerationImpulseX&&(a+=this.temporaryAccelerationImpulseX,this.temporaryAccelerationImpulseX=0);0!=this.temporaryAccelerationImpulseY&&(c+=this.temporaryAccelerationImpulseY*
Math.cos(this.rotation),a+=-2*this.temporaryAccelerationImpulseY*Math.sin(this.rotation),this.temporaryAccelerationImpulseY=0);this.acceleration=new d(this.acceleration.x+a*e.timeDiffNowMs,this.acceleration.y+c*e.timeDiffNowMs);this.acceleration.x>b.physics.limitAccelerationXMax&&(this.acceleration=new d(b.physics.limitAccelerationXMax,this.acceleration.y));this.acceleration.x<b.physics.limitAccelerationXMin&&(this.acceleration=new d(b.physics.limitAccelerationXMin,this.acceleration.y));this.acceleration.y>
b.physics.limitAccelerationYMax&&(this.acceleration=new d(this.acceleration.x,b.physics.limitAccelerationYMax));this.acceleration.y<b.physics.limitAccelerationYMin&&(this.acceleration=new d(this.acceleration.x,b.physics.limitAccelerationYMin))};PIXI.Sprite.prototype.calculateVelocity=function(){var c=0,g=0;0!=this.temporaryVelocityImpulseX&&(c=this.temporaryVelocityImpulseX);0!=this.temporaryVelocityImpulseY&&(g=this.temporaryVelocityImpulseY);this.velocity.add(new d(this.acceleration.x*e.timeDiffNowMs+
c,this.acceleration.y*e.timeDiffNowMs+g));this.acceleration=new d(0,this.acceleration.y);0!=this.tempVelocityImpulseY&&(this.temporaryVelocityImpulseY=0);0!=this.tempVelocityImpulseX&&(this.temporaryVelocityImpulseX=0);this.velocity.x>b.physics.limitVelocityX&&(this.velocity=new d(b.physics.limitVelocityX,this.velocity.y));this.velocity.x<-1*b.physics.limitVelocityX&&(this.velocity=new d(-1*b.physics.limitVelocityX,this.velocity.y));this.velocity.y>b.physics.limitVelocityY&&(this.velocity=new d(this.velocity.x,
b.physics.limitVelocityY));this.velocity.y<-1*b.physics.limitVelocityY&&(this.velocity=new d(this.velocity.x,-1*b.physics.limitVelocityY));this===a.roller&&.2>Math.abs(this.velocity.x)&&(this.velocity=0>this.velocity.x?new d(-.2,this.velocity.y):new d(.2,this.velocity.y))};PIXI.Sprite.prototype.resetAccelerationX=function(){this.acceleration.x=new d(0,this.acceleration.y)};PIXI.Sprite.prototype.resetAccelerationY=function(){this.acceleration.y=new d(this.acceleration.x,0)};PIXI.Sprite.prototype.resetAcceleration=
function(){this.resetAccelerationX();this.resetAccelerationY()};PIXI.Sprite.prototype.resetVelocityX=function(){this.velocity=new d(0,this.velocity.y)};PIXI.Sprite.prototype.resetVelocityY=function(){this.velocity=new d(this.velocity.x,0)};PIXI.Sprite.prototype.resetVelocity=function(){this.resetVelocityX();this.resetVelocityY()};PIXI.Sprite.prototype.calculatePhysics=function(){this.pastAcceleration=new d(this.acceleration.x,this.acceleration.y);this.calculateAcceleration();this.pastVelocity=new d(this.velocity.x,
this.velocity.y);this.calculateVelocity();this.pastPosition=new d(this.position.x,this.position.y);this.setPhysicsCalculatedPosition(new d(this.position.x+this.velocity.x*e.timeDiffNowMs,this.position.y+this.velocity.y*e.timeDiffNowMs))};PIXI.Sprite.prototype.setPhysicsCalculatedPosition=function(a){this.position.x=a.x;this.position.y=a.y};PIXI.Sprite.prototype.minkowskiDifference=function(a){if(a!==this){var b=new d(this.position.x-this.width/2,this.position.y-this.height/2),c=new d(a.position.x+
a.width/2,a.position.y+a.height/2),e=new d(this.width,this.height);a=new d(a.width,a.height);b=new d(b.x-c.x,b.y-c.y);e=new d(e.x+a.x,e.y+a.y);c=new PIXI.Sprite;c.width=e.x;c.height=e.y;c.position.x=b.x+c.width/2;c.position.y=b.y+c.height/2;return c}};PIXI.Sprite.prototype.checkPlatformHit=function(b){1E4==this.bounce&&(this.bounce=0);this===a.roller&&a.roller.position.y+a.roller.height/2>=a.level250.position.y-a.level250.height/2&&!this.onSurface&&(a.roller.position.x>a.level250.position.x-a.level250.width/
2&&a.roller.position.x<a.level250.position.x+a.level250.width/2?(a.roller.position.x=a.roller.position.x,a.roller.position.y=a.level250.y-a.level250.height/2-a.roller.getBounds().height/2,a.roller.onSurface=!0,a.roller.acceleration=new d(a.roller.acceleration.x,0),a.roller.velocity=new d(a.roller.velocity.x,0)):(a.roller.position.x<a.level250.position.x-a.level250.width/2&&(a.roller.position=new d(a.roller.position.x,a.level250.position.y-a.level250.height/2-a.roller.height/2),a.roller.velocity=new d(-1*
(Math.abs(a.roller.velocity.x)+1E-4),0)),a.roller.position.x>a.level250.position.x+a.level250.width/2&&(a.roller.position=new d(a.roller.position.x,a.level250.position.y-a.level250.height/2-a.roller.height/2),a.roller.velocity=new d(1*(Math.abs(a.roller.velocity.x)+1E-4),0))),a.roller.platformHitPlayed||(q.gPomp.audio.play(),a.roller.platformHitPlayed=!0));this===a.spaceship&&(0==a.spaceship.bounce?(a.spaceship.position.x=a.spaceship.position.x,a.spaceship.position.y=a.level250.position.y-a.level250.height/
2-a.spaceship.height/2-.1,a.spaceship.onSurface=!0,a.spaceship.acceleration=new d(a.spaceship.acceleration.x,0),a.spaceship.velocity=new d(a.spaceship.velocity.x,0)):(a.spaceship.velocity=new d(a.spaceship.velocity.x,-1*a.spaceship.bounce*a.spaceship.velocity.y),a.spaceship.rotation=0,a.spaceship.position.y<a.level250.position.y-a.level250.height/2?(a.spaceship.position.y=a.level250.position.y-a.level250.height/2-a.spaceship.height/2-.1,.1>Math.abs(a.spaceship.velocity.y)?(a.spaceship.position.x=
a.spaceship.position.x,a.spaceship.onSurface=!0,a.spaceship.acceleration=new d(a.spaceship.acceleration.x,0),a.spaceship.velocity=new d(a.spaceship.velocity.x,0)):a.spaceship.rotation=0):a.spaceship.position.y=a.level250.position.y+a.level250.height/2+a.spaceship.height/2+.1))};PIXI.Sprite.prototype.checkBottomHit=function(c){1E4==this.bounce&&(this.bounce=0);c=b.nonGameArea;c.x=b.nonGameArea.x;c.y=b.nonGameArea.y;c.w=b.designDim.w;c.h=b.designDim.h-b.nonGameArea.h;this.position.y+this.getBounds().height/
2>=c.y&&(0<this.rotation&&this.rotation<Math.PI/180*45&&(this.rotation=0),0>this.rotation&&this.rotation>Math.PI/180*-45&&(this.rotation=0),this.rotation>Math.PI/180*60&&this.rotation<Math.PI/180*180&&(this.rotation=Math.PI/180*60),this.rotation<Math.PI/180*-60&&this.rotation>Math.PI/180*-180&&(this.rotation=Math.PI/180*-60),this.onSurface?this.position.y=c.y-this.height/2-.1:(this.position.x=this.position.x,this.position.y=c.y-Math.floor(this.height/2),console.log(this.position.y),console.log(Math.floor(this.height/
2)),console.log(c.y),console.log(""),this.velocity=new d(this.velocity.x,-1*this.bounce*this.velocity.y),0==this.bounce?(this.onSurface=!0,this.acceleration=new d(this.acceleration.x,0),this.velocity=new d(this.velocity.x,0)):.1>Math.abs(this.velocity.y)&&(this.onSurface=!0,this.acceleration=new d(this.acceleration.x,0),this.velocity=new d(this.velocity.x,0),this.rotation=0),this===a.roller&&q.gPomp.audio.play()))}})(window.tt=window.tt||{},jQuery);